# TrustMeet 合约平台

**！！！防止朋友说好要来但是一直鸽你**

网站DEMO: [https://darcygail.github.io/trustmeet/](https://darcygail.github.io/trustmeet/)


## 1. 项目概述

**TrustMeet** 是一个基于区块链的去中心化合约平台，旨在解决传统社交和线下见面中常见的信任问题，尤其是“鸽子”现象。通过智能合约，平台为发起者与参与者提供了一种机制，确保双方按约定时间和地点见面。通过支付押金的方式，平台确保所有参与者认真对待约定，避免“鸽子”现象的发生——即某些参与者在约定的时间不出现。

在见面时间到达后，参与者通过智能合约确认到场情况，未到场者将失去押金，而所有已到场的参与者将根据已支付的押金平分未到场者的押金。

## 2. 目标

- **解决朋友间见面时的“鸽子”问题**：通过智能合约确保发起者和参与者按约定时间和地点见面，减少失约的情况。
- **智能合约**：通过智能合约自动执行见面协议，减少人为干预。
- **去中心化**：避免传统平台的信任问题，利用区块链技术确保公平与透明。
- **透明的资金管理**：所有押金都由智能合约管理，确保资金的安全与透明。

## 3. 主要功能

### 3.1 合约发起

- **设置见面时间和地点**：合约发起者可以设定见面时间，并允许在见面时间前进行取消操作。
- **设置押金金额**：合约发起者设定每位参与者需要支付的押金金额，以确保所有参与者认真对待见面。
- **部署智能合约**：发起者在平台上设置完见面信息后，可以点击按钮通过智能合约进行部署。

### 3.2 邀请参与

- **邀请朋友加入**：合约发起者可以通过平台生成邀请链接，邀请朋友加入并支付押金。
- **支付押金后加入**：参与者在支付押金并确认参与后，才能成为合约的一部分，并在见面后依据到场情况分配押金。

### 3.3 参与者加入

- **支付押金**：每个参与者需要支付与发起者设定的相同押金金额。
- **确认到场**：参与者可以在见面时间前通过合约确认自己是否到场。
- **智能合约自动分配押金**：见面结束后，未到场的参与者的押金将被分配给已到场的参与者。

### 3.4 时间与状态管理

- **见面时间到达后不可修改**：见面时间一旦到达，所有的操作将被锁定，无法再进行加入、取消或修改等操作。
- **透明的合约执行**：所有合约的状态（如参与者是否到场、押金金额等）都由区块链记录，确保透明和不可篡改。

## 4. 系统架构

### 4.1 智能合约层

**TrustMeet** 的核心是基于以太坊的智能合约。智能合约使用 **Solidity** 编写，合约的功能包括：
- **参与者管理**：合约管理参与者的加入、到场确认及押金分配。
- **时间控制**：合约中设定见面时间，确保在时间到达后无法修改。
- **押金管理**：智能合约自动管理参与者的押金，并根据到场情况进行分配。
- **费用分配**：未到场的参与者押金将按比例分配给到场的参与者。

合约的主要功能包括：
- **deployContract**：合约发起者调用该函数，设置见面信息（时间、地点、押金）并部署合约。
- **join**：参与者支付押金并加入合约，成功加入后才能确认到场。
- **confirmArrival**：参与者确认到场后调用该函数。
- **distributeDeposits**：见面结束后，按到场情况分配押金。

### 4.2 前端页面

前端页面使用 **HTML、CSS 和 JavaScript** 编写，用户通过该页面与智能合约进行交互。页面提供以下功能：
- **合约部署**：发起者输入时间、地点和押金金额后，通过智能合约部署合约。
- **邀请参与**：发起者通过生成合约地址的邀请链接，邀请朋友加入合约。
- **参与者加入**：被邀请者通过链接支付押金，加入见面合约。
- **确认到场**：参与者在见面时间前确认到场与否。
- **合约状态查看**：所有参与者可以查看合约状态，包括已支付的押金、参与者列表、到场确认情况等。

### 4.3 Web3.js 与以太坊连接

前端页面使用 **Web3.js** 与 **以太坊网络** 进行连接，通过 **MetaMask** 等钱包进行身份验证，确保用户能够安全地与智能合约进行交互。

## 5. 用户流程

### 5.1 发起者流程

1. 发起者进入平台，设置见面时间、地点和押金金额。
2. 发起者点击“发起见面”按钮，部署智能合约。
3. 合约部署成功后，发起者获取合约地址并生成邀请链接。
4. 发起者将邀请链接发送给朋友，邀请他们加入并支付押金。
5. 见面时间到达后，发起者与参与者确认到场情况。
6. 合约自动分配未到场参与者的押金给已到场参与者。

### 5.2 参与者流程

1. 参与者点击发起者发送的邀请链接，进入平台。
2. 参与者支付押金，并确认加入合约。
3. 参与者在见面时间前确认是否到场。
4. 见面结束后，合约自动分配押金，未到场者的押金将平分给到场者。

## 6. 技术实现

### 6.1 智能合约编写

智能合约使用 **Solidity** 编写并部署在 **以太坊网络** 上。合约的核心功能包括：
- 参与者的管理（加入、到场确认、资金分配等）。
- 时间管理，确保见面时间到达后无法修改或加入。
- 押金管理与自动分配，未到场的参与者失去押金，并将其分配给到场的参与者。

### 6.2 前端实现

前端使用 **HTML**、**CSS** 和 **JavaScript**，结合 **Web3.js** 与以太坊进行交互。用户通过钱包连接（如 MetaMask）进行身份验证。页面包括：
- 合约部署功能：发起者设置见面信息后部署合约。
- 邀请和加入功能：合约发起者生成邀请链接，参与者支付押金并加入。
- 状态显示：合约信息、参与者到场确认、押金分配情况等。

### 6.3 部署与运行

- 使用 **MetaMask** 进行钱包连接和身份验证。
- 部署合约时，用户需要支付以太坊的 **Gas 费用**。
- 参与者支付押金时，所有资金通过智能合约管理，确保资金的透明性和安全性。

## 7. 风险与挑战

- **智能合约漏洞**：尽管合约已经过初步的审计，但仍然可能存在安全漏洞，用户需要充分了解并承担风险。
- **网络延迟与 Gas 费用**：以太坊网络的拥堵可能导致交易延迟或 Gas 费用过高，影响合约执行效率。
- **用户体验**：用户可能会遇到与钱包连接、交易确认等相关的问题，因此前端页面需要提供清晰的提示和友好的界面。

## 8. 总结

**TrustMeet** 为解决朋友间见面时的信任问题提供了创新的去中心化解决方案。通过智能合约技术，**TrustMeet** 确保了见面活动的透明性、公平性以及资金的安全管理，有效防止了“鸽子”现象，增强了社交活动的可信度。通过利用以太坊智能合约，所有的操作都能够自动执行，减少了人为干预的风险，并且所有资金都在区块链上公开、透明地管理。

我们相信，**TrustMeet** 将为线下见面活动提供一个更安全、透明且高效的解决方案，帮助用户解决信任问题，提升社交活动的质量与可靠性。

